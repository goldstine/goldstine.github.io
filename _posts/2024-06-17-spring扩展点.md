# Spring

## Spring å¯åŠ¨è¿‡ç¨‹ä¸­çš„æ‰©å±•ç‚¹
+ BeanFactoryAware,å¯åœ¨beanä¸­è·å–BeanFactoryå®ä¾‹
+ ApplicationContextAware ,å¯åœ¨beanä¸­è·å–ApplicationAwareå®ä¾‹
+ BeanNameAware, å¯åœ¨Beanä¸­è·å–å®ƒåœ¨IOCå®¹å™¨ä¸­çš„Beanå®ä¾‹çš„åå­—
+ ApplicationListener. å¯ç›‘å¬ContextRefershedEventç­‰
+ CommandLineRunner ,æ•´ä¸ªé¡¹ç›®å¯åŠ¨å®Œæˆä¹‹åï¼Œè‡ªåŠ¨æ‰§è¡Œ
+ SmartLifecycle#start åœ¨Spring beanå®ä¾‹åŒ–ä¹‹åï¼Œæ‰§è¡Œstartæ–¹æ³•
+ ä½¿ç”¨@PostConstruct æ³¨è§£ï¼Œç”¨äºBeanå®ä¾‹åˆå§‹åŒ–
+ å®ç°InitializingBean. æ¥å£ï¼Œç”¨äºbeanå®ä¾‹åˆå§‹åŒ–
+ xmlä¸­å£°æ˜init-methodæ–¹æ³•ï¼Œç”¨äºBeanå®ä¾‹åŒ–
+ Configuration é…ç½®ç±»ï¼Œé€šè¿‡@Beanæ³¨è§£ï¼Œæ³¨å†ŒBeanåˆ°spring
+ BeanPostProcessor åœ¨beançš„åˆå§‹åŒ–å‰åï¼Œæ¤å…¥æ‰©å±•ç‚¹
+ BeanFactoryPostProcessor åœ¨BeanFactoryåˆ›å»ºåæ¤å…¥æ‰©å±•ç‚¹


## springæ‰©å±•ç‚¹
+ å‚è€ƒ https://cloud.tencent.com/developer/article/2175801
+ [1]ApplicationContextInitializer  è¿™ä¸ªæ˜¯æ•´ä¸ªspringå®¹å™¨åœ¨åˆ·æ–°ä¹‹å‰åˆå§‹åŒ–ConfigurableApplicationContextçš„å›è°ƒæ¥å£ï¼Œå®¹å™¨åˆ·æ–°ä¹‹å‰è°ƒç”¨æ­¤ç±»çš„initializeæ–¹æ³•ï¼Œè¿™ä¸ªç‚¹å…è®¸ç”¨æˆ·è¿›è¡Œæ‰©å±•ï¼Œå¯ä»¥åœ¨æ•´ä¸ªspringè¿˜æ²¡æœ‰åˆå§‹åŒ–ä¹‹å‰åšä¸€äº›äº‹æƒ…ï¼Œå› ä¸ºè¿™æ—¶å€™springå®¹å™¨è¿˜æ²¡æœ‰è¢«åˆå§‹åŒ–ï¼Œæƒ³è¦è‡ªå·±çš„æ‰©å±•ç”Ÿæ•ˆï¼Œéœ€è¦ä¸€ä¸‹ä¸‰ç§æ–¹å¼
1ã€åœ¨å¯åŠ¨ç±»ä¸­ã€‚SpringApplication.addInitializers(new TestApplicationContextInitializer());
2ã€é…ç½®æ–‡ä»¶ é…ç½®ã€‚context.initializer.classes=æ‰©å±•ç´¯è·¯å¾„
3ã€Spring spiæ‰©å±•ï¼Œåœ¨spring.factoriesä¸­åŠ å…¥. org.springframework.context.ApplicationContextInitializer=ç±»è·¯å¾„

+ [2]BeanDefinitionRegistryPostProcessor
è¿™ä¸ªæ¥å£åœ¨è¯»å–é¡¹ç›®ä¸­çš„beanDefinitionä¹‹åæ‰§è¡Œï¼Œæä¾›ä¸€ä¸ªè¡¥å……çš„æ‰©å±•ç‚¹
å¯ä»¥åŠ¨æ€æ³¨å†Œè‡ªå·±çš„beanDefinitionï¼Œå¯ä»¥åŠ è½½classpathä¹‹å¤–çš„bean

+ [3]BeanFactoryPostProcessor
è¿™ä¸ªæ¥å£æ˜¯BeanFactoryçš„æ‰©å±•æ¥å£ï¼Œè°ƒç”¨æ—¶æœºåœ¨springè¯»å–beanDefinitionä¿¡æ¯ä¹‹åï¼Œå®ä¾‹è¯beanä¹‹å‰
è¿™ä¸ªæ—¶æœºï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡å®ç°è¿™ä¸ªæ‰©å±•æ¥å£æ¥è‡ªè¡Œå¤„ç†ä¸€äº›ä¸œè¥¿ï¼Œæ¯”å¦‚ä¿®æ”¹å·²ç»æ³¨å†Œçš„beanDefinitionçš„å…ƒä¿¡æ¯

+ [4]InstantiationAwareBeanPostProcessor
è¿™ä¸ªæ¥å£ç»§æ‰¿äº†BeanPostProcessoæ¥å£ï¼ŒåŒºåˆ«å¦‚ä¸‹ï¼š
BeanPostProcessæ¥å£åªåœ¨beançš„åˆå§‹åŒ–é˜¶æ®µè¿›è¡Œæ‰©å±•ï¼ˆæ³¨å…¥springä¸Šä¸‹æ–‡å‰åï¼‰ï¼Œè€ŒInstantiationAwareBeanPostProcessoræ¥å£åœ¨æ­¤åŸºç¡€ä¸Šå¢åŠ äº†3ä¸ªæ–¹æ³•ï¼ŒæŠŠå¯æ‰©å±•çš„èŒƒå›´å¢åŠ äº†å®ä¾‹åŒ–é˜¶æ®µå’Œå±æ€§æ³¨å…¥é˜¶æ®µã€‚

è¯¥ç±»ä¸»è¦çš„æ‰©å±•ç‚¹æœ‰ä»¥ä¸‹5ä¸ªæ–¹æ³•ï¼Œä¸»è¦åœ¨beanç”Ÿå‘½å‘¨æœŸçš„ä¸¤å¤§é˜¶æ®µï¼šå®ä¾‹åŒ–é˜¶æ®µå’Œåˆå§‹åŒ–é˜¶æ®µï¼Œä¸‹é¢ä¸€èµ·è¿›è¡Œè¯´æ˜ï¼ŒæŒ‰è°ƒç”¨é¡ºåºä¸ºï¼š
è¯¥ç±»ä¸»è¦çš„æ‰©å±•ç‚¹æœ‰ä»¥ä¸‹5ä¸ªæ–¹æ³•ï¼Œä¸»è¦åœ¨beanç”Ÿå‘½å‘¨æœŸçš„ä¸¤å¤§é˜¶æ®µï¼šå®ä¾‹åŒ–é˜¶æ®µå’Œåˆå§‹åŒ–é˜¶æ®µï¼Œä¸‹é¢ä¸€èµ·è¿›è¡Œè¯´æ˜ï¼ŒæŒ‰è°ƒç”¨é¡ºåºä¸ºï¼š

postProcessBeforeInstantiationï¼šå®ä¾‹åŒ–beanä¹‹å‰ï¼Œç›¸å½“äºnewè¿™ä¸ªbeanä¹‹å‰
postProcessAfterInstantiationï¼šå®ä¾‹åŒ–beanä¹‹åï¼Œç›¸å½“äºnewè¿™ä¸ªbeanä¹‹å
postProcessPropertyValuesï¼šbeanå·²ç»å®ä¾‹åŒ–å®Œæˆï¼Œåœ¨å±æ€§æ³¨å…¥æ—¶é˜¶æ®µè§¦å‘ï¼Œ@Autowired,@Resourceç­‰æ³¨è§£åŸç†åŸºäºæ­¤æ–¹æ³•å®ç°
postProcessBeforeInitializationï¼šåˆå§‹åŒ–beanä¹‹å‰ï¼Œç›¸å½“äºæŠŠbeanæ³¨å…¥springä¸Šä¸‹æ–‡ä¹‹å‰
postProcessAfterInitializationï¼šåˆå§‹åŒ–beanä¹‹åï¼Œç›¸å½“äºæŠŠbeanæ³¨å…¥springä¸Šä¸‹æ–‡ä¹‹å
ä½¿ç”¨åœºæ™¯ï¼šè¿™ä¸ªæ‰©å±•ç‚¹éå¸¸æœ‰ç”¨ ï¼Œæ— è®ºæ˜¯å†™ä¸­é—´ä»¶å’Œä¸šåŠ¡ä¸­ï¼Œéƒ½èƒ½åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ã€‚æ¯”å¦‚å¯¹å®ç°äº†æŸä¸€ç±»æ¥å£çš„beanåœ¨å„ä¸ªç”Ÿå‘½æœŸé—´è¿›è¡Œæ”¶é›†ï¼Œæˆ–è€…å¯¹æŸä¸ªç±»å‹çš„beanè¿›è¡Œç»Ÿä¸€çš„è®¾å€¼ç­‰ç­‰ã€‚


+ [5]SmartInstantiationAwareBeanPostProcessor
ä¹Ÿæ˜¯åœ¨beanå®ä¾‹åŒ–è¿‡ç¨‹ä¸­

+ [6]BeanFactoryAware
åœ¨beanå®ä¾‹åŒ–ä¹‹åï¼Œæ³¨å…¥å±æ€§ä¹‹å‰ï¼Œä¹Ÿå°±æ˜¯åˆå§‹åŒ–ä¹‹å‰setterä¹‹å‰ï¼Œåœ¨è¿™ä¸ªæ—¶å€™ï¼Œå¯ä»¥å¯¹æ¯ä¸ªbeanä½œä¸ºç‰¹æ®ŠåŒ–å®šåˆ¶ï¼Œä¹Ÿæˆ–è€…å¯ä»¥æŠŠBeanFactoryæ‹¿åˆ°è¿›è¡Œç¼“å­˜

+ [7]ApplicationContextAwareProcessor
åœ¨beanå®ä¾‹è¯ä¹‹ååˆå§‹åŒ–ä¹‹å‰

+ [8]beanNameAware
å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªç±»ä¹Ÿæ˜¯Awareæ‰©å±•çš„ä¸€ç§ï¼Œè§¦å‘ç‚¹åœ¨beançš„åˆå§‹åŒ–ä¹‹å‰ï¼Œä¹Ÿå°±æ˜¯postProcessBeforeInitializationä¹‹å‰ï¼Œè¿™ä¸ªç±»çš„è§¦å‘ç‚¹æ–¹æ³•åªæœ‰ä¸€ä¸ªï¼šsetBeanName

ä½¿ç”¨åœºæ™¯ä¸ºï¼šç”¨æˆ·å¯ä»¥æ‰©å±•è¿™ä¸ªç‚¹ï¼Œåœ¨åˆå§‹åŒ–beanä¹‹å‰æ‹¿åˆ°springå®¹å™¨ä¸­æ³¨å†Œçš„çš„beanNameï¼Œæ¥è‡ªè¡Œä¿®æ”¹è¿™ä¸ªbeanNameçš„å€¼ã€‚

+ [9]@PostConstruct
åœ¨beançš„åˆå§‹åŒ–é˜¶æ®µï¼Œå¦‚æœæœ‰è¿™ä¸ªæ³¨è§£ï¼Œå›è¥¿å®‰è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œè¿™ä¸ªè§¦å‘ç‚¹æ˜¯åœ¨postProcessBeforeInitializationä¹‹åï¼ŒInitializingBean.afterPropertiesSetä¹‹å‰
ç”¨æˆ·å¯ä»¥å¯¹æŸä¸€ä¸ªæ–¹æ³•è¿›è¡Œæ ‡æ³¨ï¼Œæ¥è¿›è¡Œåˆå§‹åŒ–æŸä¸ªå±æ€§

+ [10]InitializingBean
è¿™ä¸ªç±»ï¼Œé¡¾åæ€ä¹‰ï¼Œä¹Ÿæ˜¯ç”¨æ¥åˆå§‹åŒ–beançš„ã€‚InitializingBeanæ¥å£ä¸ºbeanæä¾›äº†åˆå§‹åŒ–æ–¹æ³•çš„æ–¹å¼ï¼Œå®ƒåªåŒ…æ‹¬afterPropertiesSetæ–¹æ³•ï¼Œå‡¡æ˜¯ç»§æ‰¿è¯¥æ¥å£çš„ç±»ï¼Œåœ¨åˆå§‹åŒ–beançš„æ—¶å€™éƒ½ä¼šæ‰§è¡Œè¯¥æ–¹æ³•ã€‚è¿™ä¸ªæ‰©å±•ç‚¹çš„è§¦å‘æ—¶æœºåœ¨postProcessAfterInitializationä¹‹å‰ã€‚

ä½¿ç”¨åœºæ™¯ï¼šç”¨æˆ·å®ç°æ­¤æ¥å£ï¼Œæ¥è¿›è¡Œç³»ç»Ÿå¯åŠ¨çš„æ—¶å€™ä¸€äº›ä¸šåŠ¡æŒ‡æ ‡çš„åˆå§‹åŒ–å·¥ä½œã€‚

+ [11]FactoryBean
ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒSpringé€šè¿‡åå°„æœºåˆ¶åˆ©ç”¨beançš„classå±æ€§æŒ‡å®šæ”¯çº¿ç±»å»å®ä¾‹åŒ–beanï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå®ä¾‹åŒ–Beanè¿‡ç¨‹æ¯”è¾ƒå¤æ‚ï¼Œå¦‚æœæŒ‰ç…§ä¼ ç»Ÿçš„æ–¹å¼ï¼Œåˆ™éœ€è¦åœ¨beanä¸­æä¾›å¤§é‡çš„é…ç½®ä¿¡æ¯ã€‚é…ç½®æ–¹å¼çš„çµæ´»æ€§æ˜¯å—é™çš„ï¼Œè¿™æ—¶é‡‡ç”¨ç¼–ç çš„æ–¹å¼å¯èƒ½ä¼šå¾—åˆ°ä¸€ä¸ªç®€å•çš„æ–¹æ¡ˆã€‚Springä¸ºæ­¤æä¾›äº†ä¸€ä¸ªorg.springframework.bean.factory.FactoryBeançš„å·¥å‚ç±»æ¥å£ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡å®ç°è¯¥æ¥å£å®šåˆ¶å®ä¾‹åŒ–Beançš„é€»è¾‘ã€‚FactoryBeanæ¥å£å¯¹äºSpringæ¡†æ¶æ¥è¯´å ç”¨é‡è¦çš„åœ°ä½ï¼ŒSpringè‡ªèº«å°±æä¾›äº†70å¤šä¸ªFactoryBeançš„å®ç°ã€‚å®ƒä»¬éšè—äº†å®ä¾‹åŒ–ä¸€äº›å¤æ‚beançš„ç»†èŠ‚ï¼Œç»™ä¸Šå±‚åº”ç”¨å¸¦æ¥äº†ä¾¿åˆ©ã€‚ä»Spring3.0å¼€å§‹ï¼ŒFactoryBeanå¼€å§‹æ”¯æŒæ³›å‹ï¼Œå³æ¥å£å£°æ˜æ”¹ä¸ºFactoryBean<T>çš„å½¢å¼

ä½¿ç”¨åœºæ™¯ï¼šç”¨æˆ·å¯ä»¥æ‰©å±•è¿™ä¸ªç±»ï¼Œæ¥ä¸ºè¦å®ä¾‹åŒ–çš„beanä½œä¸€ä¸ªä»£ç†ï¼Œæ¯”å¦‚ä¸ºè¯¥å¯¹è±¡çš„æ‰€æœ‰çš„æ–¹æ³•ä½œä¸€ä¸ªæ‹¦æˆªï¼Œåœ¨è°ƒç”¨å‰åè¾“å‡ºä¸€è¡Œlogï¼Œæ¨¡ä»¿ProxyFactoryBeançš„åŠŸèƒ½ã€‚


+ [12]SmartInitializingSingleton
è¿™ä¸ªæ¥å£ä¸­åªæœ‰ä¸€ä¸ªæ–¹æ³•afterSingletonsInstantiatedï¼Œå…¶ä½œç”¨æ˜¯æ˜¯ åœ¨springå®¹å™¨ç®¡ç†çš„æ‰€æœ‰å•ä¾‹å¯¹è±¡ï¼ˆéæ‡’åŠ è½½å¯¹è±¡ï¼‰åˆå§‹åŒ–å®Œæˆä¹‹åè°ƒç”¨çš„å›è°ƒæ¥å£ã€‚å…¶è§¦å‘æ—¶æœºä¸ºpostProcessAfterInitializationä¹‹åã€‚

ä½¿ç”¨åœºæ™¯ï¼šç”¨æˆ·å¯ä»¥æ‰©å±•æ­¤æ¥å£åœ¨å¯¹æ‰€æœ‰å•ä¾‹å¯¹è±¡åˆå§‹åŒ–å®Œæ¯•åï¼Œåšä¸€äº›åç½®çš„ä¸šåŠ¡å¤„ç†ã€‚

+ [13]CommandLineRunner
è¿™ä¸ªæ¥å£ä¹Ÿåªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼šrun(String... args)ï¼Œè§¦å‘æ—¶æœºä¸ºæ•´ä¸ªé¡¹ç›®å¯åŠ¨å®Œæ¯•åï¼Œè‡ªåŠ¨æ‰§è¡Œã€‚å¦‚æœæœ‰å¤šä¸ªCommandLineRunnerï¼Œå¯ä»¥åˆ©ç”¨@Orderæ¥è¿›è¡Œæ’åºã€‚

ä½¿ç”¨åœºæ™¯ï¼šç”¨æˆ·æ‰©å±•æ­¤æ¥å£ï¼Œè¿›è¡Œå¯åŠ¨é¡¹ç›®ä¹‹åä¸€äº›ä¸šåŠ¡çš„é¢„å¤„ç†ã€‚

+ [14]DisposableBean
è¿™ä¸ªæ‰©å±•ç‚¹ä¹Ÿåªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼šdestroy()ï¼Œå…¶è§¦å‘æ—¶æœºä¸ºå½“æ­¤å¯¹è±¡é”€æ¯æ—¶ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œè¿™ä¸ªæ–¹æ³•ã€‚æ¯”å¦‚è¯´è¿è¡ŒapplicationContext.registerShutdownHookæ—¶ï¼Œå°±ä¼šè§¦å‘è¿™ä¸ªæ–¹æ³•ã€‚

+ [15]ApplicationListener


# Springæºç 
https://doocs.github.io/source-code-hunter/#/docs/Spring/IoC/1%E3%80%81BeanDefinition%E7%9A%84%E8%B5%84%E6%BA%90%E5%AE%9A%E4%BD%8D%E8%BF%87%E7%A8%8B






# springåŸç†
https://doocs.github.io/source-code-hunter/#/docs/Spring/Spring%E6%95%B4%E4%BD%93%E8%84%89%E7%BB%9C/16%E5%BC%A0%E5%9B%BE%E8%A7%A3%E9%94%81Spring%E7%9A%84%E6%95%B4%E4%BD%93%E8%84%89%E7%BB%9C?id=%e5%8d%b0%e8%b1%a1%e4%b8%ad%e7%9a%84-spring

IOC=å·¥å‚æ¨¡å¼+xml+åå°„
DI,AOP,äº‹åŠ¡ç­‰ä¹Ÿéƒ½åœ¨xmlä¸­è¡¨ç°

BeanDefinition--->BeanFactory--->Bean
Beançš„è§£ææµç¨‹ã€‚ xml/properties/Groovy---è§£æå™¨--->BeanDefinitionReader-->è§£æ-->BeanDefinition---> BeanDefinitionRegistry
                  æ³¨è§£è§£æå™¨--->AnnotatedBeanDefinitionReader---------->è§£æ--->BeanDefinition--->BeanDefinitionRegistry
é‡è¦å±æ€§ã€‚ beanClass/scope/isLazy/initMethodName/primary/dependsOn---->BeanDefinition------------>BeanDefinitionRegistry
å°±æ˜¯é€šè¿‡è§£æå™¨ï¼Œå¯¹xmlæ–‡ä»¶æˆ–è€…æ³¨è§£è¿›è¡Œè§£æï¼Œæœ€åå°†è¿™äº›ä¿¡æ¯å°è£…åˆ°BeanDefinitionç±»ä¸­ï¼Œå¹¶é€šè¿‡BeanDefinitionRegistryå°†è¿™äº›ä¿¡æ¯æ³¨å†Œèµ·æ¥ï¼Œæ”¾åˆ°beanDefinitionMapå˜é‡ï¼Œkeyï¼šbeanName/value/beanDefinition
BeanDefinition:
+ beanClass: beançš„ç±»å‹ï¼Œå®ä¾‹åŒ–æ—¶ä½¿ç”¨çš„
+ scopeï¼šä½œç”¨èŒƒå›´æœ‰singleton/prototype
+ initMethodName: åˆå§‹åŒ–æ–¹æ³•ï¼Œåˆå§‹åŒ–æ—¶è°ƒç”¨
+ primary: æœ‰å¤šä¸ªbeanæ—¶ä½¿ç”¨å®ƒ
+ dependsOnï¼šä¾èµ–beanï¼Œå¿…é¡»ç­‰ä¾èµ–beanåˆ›å»ºå¥½æ‰å¯ä»¥åˆ›å»º

@Componentï¼Œ@Beanéƒ½ä¼šè¢«è§£ææˆBeanDefinition

æœ‰äº†åŸæ–™BeanDefinitionä¹‹åï¼Œå†çœ‹å·¥å‚BeanFactoryï¼Œè¿™ä¸ªå·¥å‚é€šè¿‡åå°„åˆ›å»ºbean
BeanDefinition--->beanClass-->BeanFactory---åå°„Constructor<T> ctor = clazz.getDeclaredConstructor().  ctor.newInstanct--->bean
IOCå®¹å™¨çš„æ ¹æ¥å£BeanFactoryæä¾›çš„æ–¹æ³•ï¼šgetBean() é€šè¿‡åˆ«åè·å–ï¼Œç±»å‹è·å–æ–¹æ³•å’Œå…¶ä»–ä¸€äº›åˆ¤æ–­æ–¹æ³•ï¼šå•ä¾‹ï¼Œå¤šä¾‹ï¼Œç±»å‹åŒ¹é…ï¼ŒåŒ…å«bean
é»˜è®¤æ¥å£ã€‚DefaultListableBeanFactory

ListableBeanFactory. éå†bean
HierarchicalBeanFactory. æä¾›çˆ¶å­å…³ç³»ï¼Œå¯ä»¥è·å–ä¸Šä¸€çº§çš„BeanFactory
ConfigurableBeanFactory.  å®ç°ç±»SingletonBeanRegistry ä¸»è¦æ˜¯å•ä¾‹beançš„æ³¨å†Œå’Œç”Ÿæˆ
AutowireCapableBeanFactory. å’Œè‡ªåŠ¨è£…é…æœ‰å…³çš„
AbstractBeanFactory: å•ä¾‹ç¼“å­˜ï¼Œä»¥åŠFactoryBeanç›¸å…³çš„
ConfigurableListableBeanFactory: é¢„å®ä¾‹åŒ–å•ä¾‹beanï¼Œåˆ†æä¿®æ”¹BeanDefinition
AbstractAutowireCapableBeanFactory: åˆ›å»ºBeanï¼Œå±æ€§æ³¨å…¥ï¼Œå®ä¾‹åŒ–ï¼Œè°ƒç”¨åˆå§‹åŒ–æ–¹æ³•ç­‰ç­‰
DefaultListaleBeanFactory:æ”¯æŒå•ä¾‹Beanï¼ŒBeanåˆ«åï¼Œçˆ¶å­BeanFactoryï¼ŒBeanç±»å‹è½¬åŒ–ï¼ŒBeanåç½®å¤„ç†FactoryBeanï¼Œè‡ªåŠ¨è£…é…ç­‰


FactoryBeanï¼Œå®ƒæœ¬èº«å°±æ˜¯ä¸ªBeanï¼Œç®—æ˜¯å°å·¥å‚ï¼Œå½’BeanFactoryè¿™ä¸ªå¤§å·¥å‚ç®¡ç†
  FactoryBean æ–¹æ³•ï¼šgetObject() è·å–å¯¹è±¡ã€‚isSingleton()å•ä¾‹å¯¹è±¡ã€‚ getObjectType()è¿”å›æ˜¯beanå¯¹è±¡çš„ç±»å‹
  ç›¸æ¯”äºå¤§å·¥å‚BeanFactoryå°‘äº†å¾ˆå¤šä¸œè¥¿ï¼Œæ²¡æœ‰ä¸¥æ ¼çš„Beanå£°æ˜å‘¨æœŸæµç¨‹
  FactoryBeanæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªBeanï¼Œæ˜¯ä¸€ä¸ªå°å·¥å‚ï¼Œå¯ä»¥ç”Ÿäº§å¦å¤–çš„bean
  BeanFactoryæ˜¯springå®¹å™¨çš„æ ¹æ¥å£ï¼Œæ˜¯å¤§å·¥å‚ï¼Œç”Ÿäº§å„ç§å„æ ·çš„Bean
  beanNameå°±æ˜¯æ­£å¸¸å¯¹è±¡
  ã€æœ‰&è·å–FactoryBeanæœ¬èº«ï¼Œæ²¡æœ‰&è·å–è¯¥æ¥å£ä¸­çš„æ³›å‹å¯¹è±¡ã€‘


ApplicationContext
æ‰©å±•äº†ä¸€äº›åŠŸèƒ½ï¼Œé™¤äº†BeanFactoryï¼Œå®ƒè¿˜å¯ä»¥åˆ›å»ºè·å–Beanï¼Œä»¥åŠå¤„ç†å›½é™…åŒ–ï¼Œäº‹ä»¶ï¼Œè·å–èµ„æºç­‰
+ EnvironmentCapable è·å– ç¯å¢ƒå˜é‡ çš„åŠŸèƒ½ï¼Œå¯ä»¥è·å–åˆ° æ“ä½œç³»ç»Ÿå˜é‡ å’Œ JVM ç¯å¢ƒå˜é‡
+ ListableBeanFactory è·å–æ‰€æœ‰ BeanNamesï¼Œåˆ¤æ–­æŸä¸ª BeanName æ˜¯å¦å­˜åœ¨ BeanDefinition å¯¹è±¡ï¼Œç»Ÿè®¡ BeanDefinition å¯¹è±¡ï¼Œè·å–æŸä¸ªç±»å‹å¯¹åº”çš„æ‰€æœ‰ beanNames ç­‰åŠŸèƒ½
+ HierarchicalBeanFactory è·å–çˆ¶ BeanFactory ï¼Œåˆ¤æ–­æŸä¸ª name æ˜¯å¦å­˜åœ¨ bean å¯¹è±¡çš„åŠŸèƒ½
+ MessageSource å›½é™…åŒ–åŠŸèƒ½ï¼Œè·å–æŸä¸ªå›½é™…åŒ–èµ„æº
+ ApplicationEventPublisher äº‹ä»¶å‘å¸ƒåŠŸèƒ½ï¼ˆé‡ç‚¹ï¼‰
+ ResourcePatternResolver åŠ è½½ï¼Œè·å–èµ„æºçš„åŠŸèƒ½ï¼Œè¿™é‡Œçš„èµ„æºå¯èƒ½æ˜¯æ–‡ä»¶ï¼Œå›¾ç‰‡ ç­‰æŸä¸ª URL èµ„æºéƒ½å¯ä»¥
è¿˜æœ‰è¿™ä¸‰ä¸ªé‡è¦çš„ç±» ğŸ‘‡,å°±ä¸ä¸€ä¸€ä»‹ç»å…ˆå•¦ ğŸ˜„

+ ClassPathXmlApplicationContext
+ AnnotationConfigApplicationContext
+ FileSystemXmlApplicationContext


Beançš„åˆå§‹åŒ–
+ [1]å±æ€§å¡«å……ï¼Œæ„é€ å™¨ä¸­çš„å‚æ•°@Autowireã€‚@Value
+ [2]æ ¹æ®Awareæ¥å£å¡«å……bean 8ä¸ªxxxAwareæ¥å£ï¼Œ
++ BeanNameAware.  setBeanName
++ BeanClassLoaderAware. setBeanClassLoader
++ BeanFactoryAware. setBeanFactory
++ ResourceLoaderAware. setResourceLoader
++ ApplicationEventPublisherAware.  setApplicationEventPublisher
++ MessageSourceAware.  setMessageSource
++ ApplicationContextAware.  setApplicationContext
++ ServletContextAware.  setServletContext
+ [3]BeanPostProcessoråˆå§‹åŒ–å‰æ–¹æ³•ã€‚postProcessBeforeInitialization
+ [4]åˆå§‹åŒ–æ–¹æ³•ã€‚  @PostConstruct. init-methodç­‰æ–¹å¼æŒ‡å®š
+ [5]BeanPostProcessoråˆå§‹åŒ–åæ–¹æ³•ã€‚---ã€AOPã€‘postProcessAfterInitialization

AbstractAutoProxyCreator


# å‚è€ƒ
http://www.gydblog.com/spring/spi.html#%E4%B8%89%E3%80%81spring%E7%9A%84spi%E8%AE%BE%E8%AE%A1
